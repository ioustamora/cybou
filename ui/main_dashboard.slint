// Main Dashboard Window
import { Button, GroupBox, HorizontalBox, ScrollView, VerticalBox } from "std-widgets.slint";

export component MainDashboard inherits Window {
    title: "Cybou - Secure Cryptography Dashboard";
    width: 800px;
    height: 600px;

    property <string> status-text: "Ready";
    property <string> last-status: "";
    property <bool> keys-loaded: false;
    property <bool> backup-active: false;
    property <int> backup-file-count: 0;
    property <string> cloud-status: "Not Configured";
    property <int> open-windows: 1;
    property <int> total-windows: 10;

    callback open-window(string);
    callback clear-status();

    VerticalBox {
        // Header
        HorizontalBox {
            Text {
                text: "ðŸ” Cybou - Secure Cryptography Dashboard";
                font-size: 18px;
                font-weight: 600;
            }
            HorizontalBox { width: 1px; } // Spacer
            Button {
                text: "â„¹ï¸ About";
                clicked => { /* TODO: Show about dialog */ }
            }
        }

        // Separator
        Rectangle { height: 1px; background: #cccccc; }

        // Main Menu
        GroupBox {
            title: "ðŸ“‹ Main Menu - Click to open windows, or use keyboard shortcuts:";

            HorizontalBox {
                Button {
                    text: "ðŸ“ Text Encryption (Ctrl+T)";
                    clicked => { open-window("text-encryption"); }
                }
                Button {
                    text: "ðŸ“ File Encryption (Ctrl+F)";
                    clicked => { open-window("file-encryption"); }
                }
                Button {
                    text: "âœï¸ Digital Signatures (Ctrl+S)";
                    clicked => { open-window("digital-signatures"); }
                }
                Button {
                    text: "ðŸ“‚ Folder Encryption (Ctrl+D)";
                    clicked => { open-window("folder-encryption"); }
                }
                Button {
                    text: "ðŸ”§ Password Tools (Ctrl+P)";
                    clicked => { open-window("password-tools"); }
                }
                Button {
                    text: "ðŸ’¾ Backup Management (Ctrl+B)";
                    clicked => { open-window("backup-management"); }
                }
                Button {
                    text: "â˜ï¸ Cloud Storage (Ctrl+C)";
                    clicked => { open-window("cloud-storage"); }
                }
                Button {
                    text: "ðŸ”‘ Key Management (Ctrl+K)";
                    clicked => { open-window("key-management"); }
                }
                Button {
                    text: "âš™ï¸ Settings (Ctrl+G)";
                    clicked => { open-window("settings"); }
                }
            }
        }

        // Separator
        Rectangle { height: 1px; background: #cccccc; }

        // Dashboard Content
        ScrollView {
            VerticalBox {
                // Quick Actions
                GroupBox {
                    title: "ðŸš€ Quick Actions";

                    HorizontalBox {
                        Button {
                            text: "ðŸ” Encrypt Text";
                            clicked => { open-window("text-encryption"); }
                        }
                        Button {
                            text: "ðŸ“ Encrypt File";
                            clicked => { open-window("file-encryption"); }
                        }
                        Button {
                            text: "âœï¸ Sign Message";
                            clicked => { open-window("digital-signatures"); }
                        }
                        Button {
                            text: "ðŸ”‘ Generate Password";
                            clicked => { open-window("password-tools"); }
                        }
                        Button {
                            text: "ðŸ’¾ Start Backup";
                            clicked => { open-window("backup-management"); }
                        }
                    }
                }

                // System Status
                GroupBox {
                    title: "ðŸ”„ System Status";

                    VerticalBox {
                        HorizontalBox {
                            Text { text: "ðŸ”‘ Cryptographic Keys:"; }
                            Text {
                                text: keys-loaded ? "Loaded âœ“" : "Not Loaded âœ—";
                                color: keys-loaded ? #00aa00 : #aa0000;
                            }
                        }
                        HorizontalBox {
                            Text { text: "ðŸ’¾ Backup Service:"; }
                            Text {
                                text: backup-active ? "Active âœ“" : "Inactive";
                                color: backup-active ? #00aa00 : #666666;
                            }
                            if (backup-active): Text {
                                text: "(" + backup-file-count + " files backed up)";
                            }
                        }
                        HorizontalBox {
                            Text { text: "â˜ï¸ Cloud Storage:"; }
                            Text {
                                text: cloud-status;
                                color: cloud-status == "Not Configured" ? #666666 :
                                       cloud-status == "Connected âœ“" ? #00aa00 : #aaaa00;
                            }
                        }
                        HorizontalBox {
                            Text { text: "ðŸ–¼ï¸ Open Windows:"; }
                            Text { text: open-windows + " of " + total-windows; }
                        }
                    }
                }

                // Recent Activity
                GroupBox {
                    title: "ðŸ“‹ Recent Activity";

                    VerticalBox {
                        Text { text: "Last operation:"; }
                        Text { text: last-status; }
                    }
                }

                // Tips
                GroupBox {
                    title: "ðŸ’¡ Quick Tips";

                    VerticalBox {
                        Text { text: "â€¢ Use the menu above to open specific tools"; }
                        Text { text: "â€¢ Check system status for service availability"; }
                        Text { text: "â€¢ Monitor backup activity in the status bar"; }
                        Text { text: "â€¢ Keep your cryptographic keys secure"; }
                    }
                }
            }
        }

        // Separator
        Rectangle { height: 1px; background: #cccccc; }

        // Status Bar
        HorizontalBox {
            Text { text: "ðŸ“Š Status:"; }
            Text {
                text: status-text;
                color: status-text == "Ready" ? #666666 : #00aa00;
            }
            HorizontalBox { width: 1px; } // Spacer
            Button {
                text: "ðŸ—‘ï¸ Clear";
                clicked => { clear-status(); }
            }
        }
    }
}