// Digital Signatures Window
import { Button, ComboBox, GroupBox, HorizontalBox, LineEdit, ScrollView, TextEdit, VerticalBox } from "std-widgets.slint";

export component DigitalSignaturesWindow inherits Window {
    title: "Cybou - Digital Signatures";
    width: 700px;
    height: 600px;

    property <string> message: "";
    property <string> signature: "";
    property <string> public-key: "";
    property <string> private-key: "";
    property <string> status: "Ready";
    property <string> algorithm: "Dilithium";
    property <bool> verify-mode: false;

    callback sign();
    callback verify();
    callback load-keys();
    callback generate-keys();
    callback clear();
    callback copy-signature();
    callback save-signature();

    VerticalBox {
        // Header
        HorizontalBox {
            Text {
                text: "‚úçÔ∏è Digital Signatures";
                font-size: 16px;
                font-weight: 600;
            }
            HorizontalBox { width: 1px; } // Spacer
            Button {
                text: "‚ùå Close";
                clicked => { /* TODO: Close window */ }
            }
        }

        // Separator
        Rectangle { height: 1px; background: #cccccc; }

        // Algorithm Selection
        GroupBox {
            title: "üîê Signature Algorithm";

            VerticalBox {
                ComboBox {
                    model: ["Dilithium (Post-Quantum)", "Ed25519", "RSA-PSS"];
                    current-value: algorithm;
                    selected(value) => { algorithm = value; }
                }
                Text {
                    text: "Dilithium provides post-quantum security against quantum computer attacks.";
                    font-size: 12px;
                    color: #666666;
                }
            }
        }

        // Key Management
        GroupBox {
            title: "üîë Key Management";

            VerticalBox {
                HorizontalBox {
                    Button {
                        text: "üîÑ Generate New Keys";
                        clicked => { generate-keys(); }
                    }
                    Button {
                        text: "üìÅ Load Keys";
                        clicked => { load-keys(); }
                    }
                }
                Text {
                    text: "Public Key (for verification):";
                    font-weight: 600;
                }
                TextEdit {
                    text <=> public-key;
                    placeholder-text: "Public key will appear here...";
                    read-only: true;
                    height: 60px;
                }
                Text {
                    text: "Private Key (keep secret):";
                    font-weight: 600;
                }
                TextEdit {
                    text <=> private-key;
                    placeholder-text: "Private key will appear here...";
                    read-only: true;
                    height: 60px;
                }
            }
        }

        // Message Input
        GroupBox {
            title: "üìù Message";

            TextEdit {
                text <=> message;
                placeholder-text: "Enter message to sign or verify...";
                wrap: word-wrap;
            }
        }

        // Signature Input/Output
        GroupBox {
            title: "‚úçÔ∏è Signature";

            VerticalBox {
                TextEdit {
                    text <=> signature;
                    placeholder-text: verify-mode ? "Paste signature to verify..." : "Signature will appear here...";
                    wrap: word-wrap;
                    read-only: !verify-mode;
                }
                HorizontalBox {
                    Button {
                        text: "üìã Copy";
                        clicked => { copy-signature(); }
                    }
                    Button {
                        text: "üíæ Save";
                        clicked => { save-signature(); }
                    }
                }
            }
        }

        // Action Buttons
        HorizontalBox {
            Button {
                text: "‚úçÔ∏è Sign Message";
                clicked => { sign(); }
                enabled: !verify-mode;
            }
            Button {
                text: "‚úÖ Verify Signature";
                clicked => { verify(); }
                enabled: verify-mode;
            }
            Button {
                text: "üîÑ Switch to Verify";
                clicked => { verify-mode = !verify-mode; }
            }
            Button {
                text: "üóëÔ∏è Clear";
                clicked => { clear(); }
            }
        }

        // Status
        HorizontalBox {
            Text { text: "üìä Status:"; }
            Text {
                text: status;
                color: status == "Ready" ? #666666 : #00aa00;
            }
        }
    }
}